%html
  %head
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <!-- Use title if it's in the page YAML frontmatter -->
    <title>#{ current_page.data.title || "Codeship Docs"}</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    = stylesheet_link_tag "/css/normalize.css"
    = stylesheet_link_tag "/css/main.css"
    = stylesheet_link_tag "/css/vendor/bootstrap.min.css"
    = stylesheet_link_tag "/css/vendor/bootstrap-theme.min.css"

    = javascript_include_tag "js/vendor/modernizr-2.6.1.min.js"
    = javascript_include_tag "js/vendor/bootstrap.min.js"

  %body
    = partial 'swiftype'

    .col-md-12
      .row
        .col-md-2
          %h2 Index
          %ul
            %li
              %a{href: "/#getting_started"} Getting Started
            %li
              %a{href: "/#configure_build_and_test_environment"} Configure Build and Test Environment
            %li
              %a{href: "/#deployment"} Configure Deployments
            %li
              %a{href: "/#managing_project"} Managing your project
            %li
              %a{href: "/#languages"} Supported Languages and Frameworks
            %li
              %a{href: "/#databases"} Installed Databases, Queues and Datastores
            %li
              %a{href: "/#browsers"} Installed Browsers for Testing
            %li
              %a{href: "/#troubleshooting"} Troubleshooting
            %li
              %a{href: "/#codeship_infrastructure"} Codeship Security and Infrastructure
            %li
              %a{href: "/#links"}Useful Links
        .col-md-10
          - nav_tree = current_page.source_file.match(/articles\/.*\.html/).to_s.split('/')
          - if nav_tree.present?
            %ol.breadcrumb
              %li
                %a{href: "/"} Overview
              %li
                %a{href: "/##{to_id nav_tree[1]}"}= replace_with_whitespace nav_tree[1]
              %li
                = replace_with_whitespace nav_tree[2]
          ~ yield


    %a{href: "https://github.com/codeship/docs/issues", target: :blank}Report issue
    %a.intercom{href: ""} Contact the Codeship Team

    = javascript_include_tag "//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"
    :javascript
      window.jQuery || document.write('<script src="js/vendor/jquery-1.8.0.min.js"><\/script>')
    = javascript_include_tag "js/plugins.js"
    = javascript_include_tag "js/main.js"

    :javascript
      var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
      (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
      g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
      s.parentNode.insertBefore(g,s)}(document,'script'));


